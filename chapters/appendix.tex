\section{Complementary rules}
\label{sec:more-rules}

\input{figcong}


\section{Proof of the fundamental lemma}
\label{sec:proof-fund-lemma}

\begin{lemma}[Fundamental lemma]
  Let $t_1$ and $t_2$ be two terms. If $\isterm{\Ga, \Ga_1}{t_1}{T_1}$ and
  $\isterm{\Ga, \Ga_2}{t_2}{T_2}$ and $t_1 \sim t_2$ then there exists $p$ such
  that
  $\isterm{\Ga, \Pack{\Ga_1}{\Ga_2}}
          {p}
          {\Heq{\llift{\gamma}{}{T_1}}
               {\llift{\gamma}{}{t_1}}
               {\rlift{\gamma}{}{T_2}}
               {\rlift{\gamma}{}{t_2}}}$.
\end{lemma}

For readability we will abbreviate the left and right substitutions
$\llift{\gamma}{}{\_}$ and $\rlift{\gamma}{}{\_}$ by $\upharpoonleft$
and $\upharpoonright$ respectively.

\begin{proof}
  We prove it by induction on the derivation of $t_1 \sim t_2$.

  \begin{itemize}
    \item \textsc{Var}
    \[
      \infer[]
        { }
        {x \sim x}
      %
    \]
    If $x$ belongs to $\Ga$, we apply reflexivity---together with uniqueness of
    typing~\eqref{lem:uniq}---to conclude.
    Otherwise, $\ProjE{x}$ has the expected type (since
    $\llift{\gamma}{}{x} \equiv \ProjO{x}$ and $\rlift{\gamma}{}{x} \equiv \ProjT{x}$).

    \item \textsc{TransportLeft}
    \[
      \infer[]
        {t_1 \sim t_2}
        {\translpo{p}\ t_1 \sim t_2}
      %
    \]
    We have $\isterm{\Ga, \Ga_1}{\translpo{p}\ t_1}{T_1}$ and
    $\isterm{\Ga, \Ga_2}{t_2}{T_2}$.
    By inversion~\eqref{lem:inversion} we have
    $\isterm{\Ga, \Ga_1}{p}{\Eq{}{T_1'}{T_1}}$ and
    $\isterm{\Ga, \Ga_1}{t_1}{T_1'}$.
    Then by induction hypothesis we have $e$ such that
    $\isterm{\Ga, \Gp}{e}{\Heq{}{\lo{t_1}}{}{\ro{t_2}}}$.
    From transitivity and symmetry we only need to provide a proof of
    $\Heq{}{\lo{t_1}}{}{\translpo{\lo{p}}\ \lo{t_1}}$ which is inhabited by
    $\pair{\_}{\_}{\lo{p}}{\refl{} (\translpo{\lo{p}}\ \lo{t_1})}$.

    \item \textsc{TransportRight}
    \[
      \infer[]
        {t_1 \sim t_2}
        {t_1 \sim \translpo{p}\ t_2}
      %
    \]
    Similarly.

    \item \textsc{Product}
    \[
      \infer[]
        {A_1 \sim A_2 \\
         B_1 \sim B_2
        }
        {\Prod{x:A_1} B_1 \sim \Prod{x:A_2} B_2}
      %
    \]
    We have $\isterm{\Ga, \Ga_1}{\Prod{x:A_1} B_1}{T_1}$ and
    $\isterm{\Ga, \Ga_2}{\Prod{x:A_2} B_2}{T_2}$ so by
    inversion~\eqref{lem:inversion} we have $\isterm{\Ga, \Ga_1}{A_1}{s_1}$ and
    $\isterm{\Ga, \Ga_1, x:A_1}{B_1}{s'_1}$ and
    $\eqtype{\Ga, \Ga_1}{s''_1}{T_1}$ for $(s_1,s'_1,s''_1) \in \Rl$
    (and similarly with $2$s).
    By induction hypothesis we have
    $\isterm{\Ga, \Gp}{p_A}{\Heq{}{\lo{A_1}}{}{\ro{A_2}}}$ and
    $\isterm
      {\Ga, \Gp, x : \Pack{A_1}{A_2}}
      {p_B}
      {\Heq{}{\lo{B_1}}{}{\ro{B_2}}}
    $
    hence the result (using UIP and FunExt, refer to the
    formalisation and especially to the file \rpath{Quotes.v} for more details
    on how to realise this equality).

    \item \textsc{Equality}
    \[
      \infer[]
        {A_1 \sim A_2 \\
         u_1 \sim u_2 \\
         v_1 \sim v_2
        }
        {\Eq{A_1}{u_1}{v_1} \sim \Eq{A_2}{u_2}{v_2}}
      %
    \]
    We have $\isterm{\Ga, \Ga_1}{\Eq{A_1}{u_1}{v_1}}{T_1}$ and
    $\isterm{\Ga, \Ga_2}{\Eq{A_2}{u_2}{v_2}}{T_2}$ so, by
    inversion~\eqref{lem:inversion}, we have
    $\isterm{\Ga, \Ga_1}{A_1}{s_1}$ and $\isterm{\Ga, \Ga_1}{u_1}{A_1}$ and
    $\isterm{\Ga, \Ga_1}{v_1}{A_1}$ as well as $\eqtype{\Ga, \Ga_1}{s_1}{T_1}$
    (and the same with $2$s). By induction hypothesis we thus have
    $\isterm{\Ga, \Gp}{p_{A}}{\Heq{}{A_1}{}{A_2}}$ and
    $\isterm{\Ga, \Gp}{p_u}{\Heq{}{u_1}{}{u_2}}$ and
    $\isterm{\Ga, \Gp}{p_v}{\Heq{}{v_1}{}{v_2}}$.
    We can thus conclude.

    \item \textsc{Reflexivity}
    \[
      \infer[]
        { }
        {s \sim s}
      %
    \]
    This one holds by reflexivity and uniqueness of typing~\eqref{lem:uniq}
    (indeed, $\lo{s} \equiv s$ and $\ro{s} \equiv s$).

    \item \textsc{Lambda}
    \[
      \infer[]
        {A_1 \sim A_2 \\
         B_1 \sim B_2 \\
         t_1 \sim t_2
        }
        {\lam{x:A_1}{B_1} t_1 \sim \lam{x:A_2}{B_2} t_2}
      %
    \]
    We have $\isterm{\Ga, \Ga_1}{\lam{x:A_1}{B_1} t_1}{T_1}$ and
    $\isterm{\Ga, \Ga_2}{\lam{x:A_2}{B_2} t_2}{T_2}$, thus, by
    inversion~\ref{lem:inversion} the subterms are well-typed and we can
    apply induction hypothesis. The conclusion follows similarly to the $\Pi$
    case.

    \item \textsc{Application}
    \[
      \infer[]
        {t_1 \sim t_2 \\
         A_1 \sim A_2 \\
         B_1 \sim B_2 \\
         u_1 \sim u_2
        }
        {\app{t_1}{x:A_1}{B_1}{u_1} \sim \app{t_2}{x:A_2}{B_2}{u_2}}
      %
    \]
    We have $\isterm{\Ga, \Ga_1}{\app{t_1}{x:A_1}{B_1}{u_1}}{T_1}$ and
    $\isterm{\Ga, \Ga_2}{\app{t_2}{x:A_2}{B_2}{u_2}}{T_2}$ which means by
    inversion~\eqref{lem:inversion} that the subterms are well-typed.
    We apply the induction hypothesis and then conclude.

    \item \textsc{Reflexivity}
    \[
      \infer[]
        {A_1 \sim A_2 \\
         u_1 \sim u_2
        }
        {\refl{A_1} u_1 \sim \refl{A_2} u_2}
      %
    \]
    We have $\isterm{\Ga, \Ga_1}{\refl{A_1} u_1}{T_1}$ and
    $\isterm{\Ga, \Ga_2}{\refl{A_2} u_2}{T_2}$ so by
    inversion~\eqref{lem:inversion} we have $\isterm{\Ga, \Ga_1}{A_1}{s_1}$ and
    $\isterm{\Ga, \Ga_1}{u_1}{A_1}$
    (same with $2$s). By IH we have $\Heq{}{\lo{A_1}}{}{\ro{A_2}}$ and
    $\Heq{\lo{A_1}}{\lo{u_1}}{\ro{A_2}}{\ro{u_2}}$.
    The proof follows easily.

    \item \textsc{Funext}
    \[
      \infer[]
        {A_1 \sim A_2 \\
         B_1 \sim B_2 \\
         f_1 \sim f_2 \\
         g_1 \sim g_2 \\
         e_1 \sim e_2
        }
        {\funext{x:A_1}{B_1}{f_1}{g_1}{e_1}
         \sim \funext{x:A_2}{B_2}{f_2}{g_2}{e_2}
        }
      %
    \]
    Similar.

    \item \textsc{UIP}
    \[
      \infer[]
        {A_1 \sim A_2 \\
         u_1 \sim u_2 \\
         v_1 \sim v_2 \\
         p_1 \sim p_2 \\
         q_1 \sim q_2
        }
        {\uip{A_1}{u_1}{v_1}{p_1}{q_1} \sim \uip{A_2}{u_2}{v_2}{p_2}{q_2}}
      %
    \]
    Similar.

    \item \textsc{J}
    \[
      \infer[]
        {A_1 \sim A_2 \\
         u_1 \sim u_2 \\
         P_1 \sim P_2 \\
         w_1 \sim w_2 \\
         v_1 \sim v_2 \\
         p_1 \sim p_2
        }
        {\J{A_1}{u_1}{x.e.P_1}{w_1}{v_1}{p_1} \sim
         \J{A_2}{u_2}{x.e.P_2}{w_2}{v_2}{p_2}
        }
      %
    \]
    Similar.
  \end{itemize}
\end{proof}

\section{Correctness of the translation}
\label{sec:corr-transl}
\begin{theorem}[Translation]
  \leavevmode
  \begin{itemize}
    \item If $\xisctx{\Ga}$ then there exists
    $\isctx{\Gb} \in \transl{\xisctx{\Ga}}$,

    \item If $\xisterm{\Ga}{t}{T}$ then for any
    $\isctx{\Gb} \in \transl{\xisctx{\Ga}}$ there exist $\tb$ and $\Tb$ such that
    $\isterm{\Gb}{\tb}{\Tb} \in \transl{\xisterm{\Ga}{t}{T}}$,

    \item If $\xeqterm{\Ga}{u}{v}{A}$ then for any
    $\isctx{\Gb} \in \transl{\xisctx{\Ga}}$ there exist
    $A \ir \Ab, A \ir \Ab', u \ir \ub, v \ir \vb$ and $\eb$ such that
    $\isterm{\Gb}{\eb}{\Heq{\Ab}{\ub}{\Ab'}{\vb}}$.
  \end{itemize}
\end{theorem}

\begin{proof}
  We prove the theorem by induction on the derivation in the extensional
  type theory. In most cases we need to assume some $\Gb$, translation of the
  context, we will implicitly refer to $\Gb$ in such cases as the one given as
  hypothesis.
  \leavevmode
  \begin{itemize}
    \item \textsc{Empty}
    \[
      \infer[]
        { }
        {\xisctx{\ctxempty}}
      %
    \]
    We have $\isctx{\ctxempty} \in \transl{\xisctx{\ctxempty}}$.

    \item \textsc{Extend}
    \[
      \infer[]
        {\xisctx{\Ga} \\
         \xistype{\Ga}{A}
        }
        {\xisctx{\Ga, x:A}}
      (x \notin \Ga)
    \]
    By IH we have $\isctx{\Gb} \in \transl{\xisctx{\Ga}}$ and, using $\Gb$
    as well as lemma~\ref{lem:choose},
    $\isterm{\Gb}{\Ab}{s} \in \transl{\xisterm{\Ga}{A}{s}}$.
    Thus $\isctx{\Gb, x:\Ab} \in \transl{\xisctx{\Ga, x:A}}$.

    \item \textsc{Sort}
    \[
      \infer[]
        {\xisctx{\Ga}}
        {\xisterm{\Ga}{s}{s'}}
      (s,s')
    \]
    We have $\isterm{\Gb}{s}{s'} \in \transl{\xisterm{\Ga}{s}{s'}}$.

    \item \textsc{Product}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga,x:A}{B}{s'}
        }
        {\xisterm{\Ga}{\Prod{x:A} B}{s''}}
      (s,s',s'')
    \]
    By IH and lemma~\ref{lem:choose} we have $\isterm{\Gb}{\Ab}{s}$,
    meaning $\isctx{\Gb,x:\Ab} \in \transl{\xisctx{\Ga, x:A}}$,
    and then $\isterm{\Gb,x:\Ab}{\Bb}{s'}$.
    We thus conclude
    $\isterm{\Gb}{\Prod{x:\Ab} \Bb}{s''} \in
    \transl{\xisterm{\Ga}{\Prod{x:A} B}{s''}}$.

    \item \textsc{Sigma}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga,x:A}{B}{s'}
        }
        {\xisterm{\Ga}{\Sum{x:A} B}{s''}}
      (s,s',s'')
    \]
    Similar.

    \item \textsc{Equality}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga}{u}{A} \\
         \xisterm{\Ga}{v}{A}
        }
        {\xisterm{\Ga}{\Eq{A}{u}{v}}{s}}
      %
    \]
    By IH and lemma~\ref{lem:choose} we have $\isterm{\Gb}{\Ab}{s}$,
    and---using lemma~\ref{lem:change-type}---we also have
    $\isterm{\Gb}{\ub}{\Ab}$ and $\isterm{\Gb}{\vb}{\Ab}$.
    Then
    $\isterm{\Gb}{\Eq{\Ab}{\ub}{\vb}}{s} \in
    \transl{\xisterm{\Ga}{\Eq{A}{u}{v}}{s}}$.

    \item \textsc{Variable}
    \[
      \infer[]
        {\xisctx{\Ga} \\
         (x : A) \in \Ga
        }
        {\xisterm{\Ga}{x}{A}}
      %
    \]
    We have $\isctx{\Gb} \in \transl{\xisctx{\Ga}}$ (as we assumed, this is not
    an instance of the induction hypothesis) and $(x : A) \in \Ga$.
    By definition of $\Ga \ir \Gb$ we also have some $(x : \Ab) \in \Gb$
    with $A \ir \Ab$, thus
    $\isterm{\Gb}{x}{\Ab} \in \transl{\xisterm{\Ga}{x}{A}}$.

    \item \textsc{Conversion}
    \[
      \infer[]
        {\xisterm{\Ga}{u}{A} \\
         \xeqtype{\Ga}{A}{B}
        }
        {\xisterm{\Ga}{u}{B}}
      %
    \]
    By IH and lemma~\ref{lem:uip-cong} we have
    $\isterm{\Gb}{\eb}{\Eq{}{\Ab}{\Bb}}$ which implies
    $\istype{\Gb}{\Ab} \in \transl{\xistype{\Ga}{A}}$ by
    inversion~\eqref{lem:inversion}, thus, from lemma~\ref{lem:change-type}
    and IH we get $\isterm{\Gb}{\ub}{\Ab}$, yielding
    $\isterm{\Gb}{\translpo{\eb}\ \ub}{\Bb} \in \transl{\xisterm{\Ga}{u}{B}}$.

    \item \textsc{Lambda}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga,x:A}{B}{s'} \\
         \xisterm{\Ga,x:A}{t}{B}
        }
        {\xisterm{\Ga}{\lam{x:A}{B} t}{\Prod{x:A} B}}
      %
    \]
    By IH and lemma~\ref{lem:choose} we have $\isterm{\Gb}{\Ab}{s}$ and thus
    $\isctx{\Gb, x:\Ab} \in \transl{\xisctx{\Ga,x:A}}$, meaning we can apply IH
    and lemma~\ref{lem:choose} to the second hypothesis to get
    $\isterm{\Gb,x:\Ab}{\Bb}{s'} \in \transl{\xisterm{\Ga,x:A}{B}{s'}}$ and then
    IH and lemma~\ref{lem:change-type} to get
    $\isterm{\Gb,x:\Ab}{\tb}{\Bb} \in \transl{\xisterm{\Ga,x:A}{t}{B}}$.
    All of this yields
    $\isterm{\Gb}{\lam{x:\Ab}{\Bb} \tb}{\Prod{x:\Ab} \Bb}
    \in \transl{\xisterm{\Ga}{\lam{x:A}{B} t}{\Prod{x:A} B}}$.

    \item \textsc{Application}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga,x:A}{B}{s'} \\
         \xisterm{\Ga}{t}{\Prod{x:A} B} \\
         \xisterm{\Ga}{u}{A}
        }
        {\xisterm{\Ga}{\app{t}{x:A}{B}{u}}{B[x \sto u]}}
      %
    \]
    Using IH together with lemmata~\ref{lem:choose} and~\ref{lem:change-type}
    we get $\isterm{\Gb}{\Ab}{s}$ and $\isterm{\Gb,x:\Ab}{\Bb}{s'}$ and
    $\isterm{\Gb}{\tb}{\Prod{x:\Ab} \Bb}$ and $\isterm{\Gb}{\ub}{\Ab}$
    meaning we can conclude
    $\isterm{\Gb}{\app{\tb}{x:\Ab}{\Bb}{\ub}}{\Bb[x \sto \ub]}
    \in \transl{\xisterm{\Ga}{\app{t}{x:A}{B}{u}}{B[x \sto u]}}$.

    \item \textsc{Pair}
    \[
      \infer[]
        {\xisterm{\Ga}{u}{A} \\
         \xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga,x:A}{B}{s'} \\
         \xisterm{\Ga}{v}{B[x \sto u]}
        }
        {\xisterm{\Ga}{\pair{x:A}{B}{u}{v}}{\Sum{x:A}{B}}}
      %
    \]
    Using IH with lemmata~\ref{lem:choose} and~\ref{lem:change-type} we
    translate all the hypotheses to conclude
    $\isterm{\Gb}{\pair{x:\Ab}{\Bb}{\ub}{\vb}}{\Sum{x:\Ab}{\Bb}}
    \in \transl{\xisterm{\Ga}{\pair{x:A}{B}{u}{v}}{\Sum{x:A}{B}}}$.

    \item \textsc{Proj$_1$}
    \[
      \infer[]
        {\xisterm{\Ga}{p}{\Sum{x:A}{B}}}
        {\xisterm{\Ga}{\pio{x:A}{B}{p}}{A}}
      %
    \]
    Similar.

    \item \textsc{Proj$_2$}
    \[
      \infer[]
        {\xisterm{\Ga}{p}{\Sum{x:A}{B}}}
        {\xisterm{\Ga}{\pit{x:A}{B}{p}}{B[x \sto \pio{x:A}{B}{p}]}}
      %
    \]
    Similar.

    \item \textsc{Reflexivity}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga}{u}{A}
        }
        {\xisterm{\Ga}{\refl{A} u}{\Eq{A}{u}{u}}}
      %
    \]
    By IH we have $\isterm{\Gb}{\ub}{\Ab}$ and thus
    $\isterm{\Gb}{\refl{\Ab} \ub}{\Eq{\Ab}{\ub}{\ub}} \in
    \transl{\xisterm{\Ga}{\refl{A} u}{\Eq{A}{u}{u}}}$.

    \item \textsc{J}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga}{u,v}{A} \\
         \xisterm{\Ga, x:A, e:\Eq{A}{u}{x}}{P}{s'} \\
         \xisterm{\Ga}{p}{\Eq{A}{u}{v}} \\
         \xisterm{\Ga}{w}{P[x \sto u, e \sto \refl{A} u]}
        }
        {\xisterm
          {\Ga}
          {\J{A}{u}{x.e.P}{w}{v}{p}}
          {P[x \sto v, e \sto p]}
        }
      %
    \]
    By IH and lemma~\ref{lem:choose} we have $\isterm{\Gb}{\Ab}{s}$.
    From this and IH and lemma~\ref{lem:change-type} we have
    $\isterm{\Gb}{\ub,\vb}{\Ab}$. We can thus deduce
    $\isctx{\Gb,x:\Ab,e:\Eq{\Ab}{\ub}{x}} \in \transl{\Ga, x:A, e:\Eq{A}{u}{x}}$
    which in turn gives us
    $\isterm{\Gb, x:\Ab,e:\Eq{\Ab}{\ub}{x}}{\Pb}{s'}$.
    Similarly we also get $\isterm{\Gb}{\pb}{\Eq{\Ab}{\ub}{\vb}}$ and
    $\isterm{\Gb}{\wb}{\Pb[x \sto \ub, e \sto \refl{\Ab} \ub]}$.
    All of this allows us to conclude
    $\isterm
      {\Gb}
      {\J{\Ab}{\ub}{x.e.\Pb}{\wb}{\vb}{\pb}}
      {\Pb[x \sto \vb, e \sto \pb]}
    \in
    \transl{
      \xisterm
        {\Ga}
        {\J{A}{u}{x.e.P}{w}{v}{p}}
        {P[x \sto v, e \sto p]}
    }$.

    \item \textsc{Funext}
    \[
      \infer[]
        {\isterm{\Ga}{f,g}{\Prod{x:A} B} \\
         \isterm
           {\Ga}
           {e}
           {\Prod{x:A} \Eq{B}{\app{f}{x:A}{B}{x}}{\app{g}{x:A}{B}{x}}}
        }
        {\isterm{\Ga}{\funext{x:A}{B}{f}{g}{e}}{\Eq{}{f}{g}}}
      %
    \]
    Similar.

    \item \textsc{UIP}
    \[
      \infer[]
        {\xisterm{\Ga}{e_1,e_2}{\Eq{A}{u}{v}}}
        {\xisterm{\Ga}{\uip{A}{u}{v}{e_1}{e_2}}{\Eq{}{e_1}{e_2}}}
      %
    \]
    Similar.

    \item \textsc{Beta}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga,x:A}{B}{s'} \\
         \xisterm{\Ga,x:A}{t}{B} \\
         \xisterm{\Ga}{u}{A}
        }
        {\xeqterm
          {\Ga}
          {\app
            {(\lam{x:A}{B} t)}
            {x:A}
            {B}
            {u}
          }
          {t[x \sto u]}
          {B[x \sto u]}
        }
      %
    \]
    From IH and the lemmata, we even get the conversion, we conclude using
    reflexivity.

    \item \textsc{Proj$_1$-Red}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga}{u}{A} \\
         \xisterm{\Ga,x:A}{B}{s'} \\
         \xisterm{\Ga}{v}{B[x \sto u]}
        }
        {\xeqterm
          {\Ga}
          {\pio{x:A}{B}{\pair{x:A}{B}{u}{v}}}
          {u}
          {A}
        }
      %
    \]
    Likewise.

    \item \textsc{Proj$_2$-Red}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{s} \\
         \xisterm{\Ga}{u}{A} \\
         \xisterm{\Ga,x:A}{B}{s'} \\
         \xisterm{\Ga}{v}{B[x \sto u]}
        }
        {\xeqterm
          {\Ga}
          {\pit{x:A}{B}{\pair{x:A}{B}{u}{v}}}
          {v}
          {B[x \sto u]}
        }
      %
    \]
    Likewise.

    \item \textsc{J-Red}
    \[
      \infer[]
        {\xisterm{\Ga}{A}{\Un{i}} \\
         \xisterm{\Ga}{u}{A} \\
         \xisterm{\Ga, x:A, e:\Eq{A}{u}{x}}{P}{\Un{j}} \\
         \xisterm{\Ga}{w}{P[x \sto u, e \sto \refl{A} u]}
        }
        {\xeqterm
          {\Ga}
          {\J{A}{u}{x.e.P}{w}{u}{\refl{A} u}}
          {w}
          {P[x \sto u, e \sto \refl{A} u]}
        }
      %
    \]
    Likewise.

    \item \textsc{Conv-Refl}
    \[
      \infer[]
        {\xisterm{\Ga}{u}{A}}
        {\xeqterm{\Ga}{u}{u}{A}}
      %
    \]
    We conclude from IH and reflexivity of $\Heqs$.

    \item \textsc{Conv-Sym}
    \[
      \infer[]
        {\xeqterm{\Ga}{u}{v}{A}}
        {\xeqterm{\Ga}{v}{u}{A}}
      %
    \]
    We conclude from IH and symmetry of $\Heqs$.

    \item \textsc{Conv-Trans}
    \[
      \infer[]
        {\xeqterm{\Ga}{u}{v}{A} \\
         \xeqterm{\Ga}{v}{w}{A}
        }
        {\xeqterm{\Ga}{u}{w}{A}}
      %
    \]
    We conclude from IH and transitivity of $\Heqs$.

    % \item \textsc{}
    % \[
    %   \infer[]
    %     {\xisterm{\Ga}{A}{s} \\
    %      \xisterm{\Ga, x:A}{B}{s'} \\
    %      \xisterm{\Ga}{f}{\Prod{x:A} B}
    %     }
    %     {\xeqterm
    %       {\Ga}
    %       {\lam{x:A}{B} \app{f}{x:A}{B}{x}}
    %       {f}
    %       {\Prod{x:A} B}
    %     }
    %   %
    % \]
    % This works like the computation cases.

    \item \textsc{Conv-Conv}
    \[
      \infer[]
        {\xeqterm{\Ga}{t_1}{t_2}{T_1} \\
         \xeqtype{\Ga}{T_1}{T_2}
        }
        {\xeqterm{\Ga}{t_1}{t_2}{T_2}}
      %
    \]
    By IH (and lemma~\ref{lem:uip-cong}) we have
    $\isterm{\Gb}{\eb}{\Heq{\Tb_1}{\tb_1}{\Tb'_1}{\tb_2}}$ and
    $\isterm{\Gb}{p}{\Eq{}{\Tb''_1}{\Tb_2}}$. Also from
    lemmata~\ref{lem:sim-cong} and~\ref{lem:uip-cong} we have
    $\Eq{}{\Tb'_1}{\Tb''_1}$ and $\Eq{}{\Tb_1}{\Tb''_1}$, meaning we get
    $\Eq{}{\Tb'_1}{\Tb_2}$ and $\Eq{}{\Tb_1}{\Tb_2}$.
    This allows us to conclude by transporting along the aforementioned
    equalities.

    \item \textsc{Conv-Prod}
    \[
      \infer[]
        {\xeqterm{\Ga}{A_1}{A_2}{s} \\
         \xeqterm{\Ga,x:A_1}{B_1}{B_2}{s'}
        }
        {\xeqterm{\Ga}{\Prod{x:A_1} B_1}{\Prod{x:A_2} B_2}{s''}}
      (s,s',s'')
    \]
    We conclude exactly like we did in the proof of lemma~\ref{lem:sim-cong}.

    \item All congruences hold like in proof of
    lemma~\ref{lem:sim-cong}.

    \item \textsc{Conv-Eq}
    \[
      \infer[]
        {\xisterm{\Ga}{e}{\Eq{A}{u}{v}}}
        {\xeqterm{\Ga}{u}{v}{A}}
      %
    \]
    By IH and lemma~\ref{lem:choose} we have
    $\isterm{\Gb}{\eb}{\Eq{\Ab}{\ub}{\vb}}
    \in \transl{\xisterm{\Ga}{e}{\Eq{A}{u}{v}}}$ which yields the conclusion we
    wanted.
  \end{itemize}
\end{proof}