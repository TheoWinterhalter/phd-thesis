% \setchapterpreamble[u]{\margintoc}
\chapter{Framework}
\labch{elim-reflection-framework}

Now that the problem is stated, I will clearly define what the type theories
I will use as source and target. This is a bit redundant with \nrefch{flavours}
but I think it's worthwhile to make it clear what the translation is operating
on.

\section{Syntax(es)}

To make things simple I will consider the syntax of \acrshort{ITT} and
\acrshort{WTT} as extensions of the syntax of \acrshort{ETT}.
Actually, \acrshort{WTT} will also extend \acrshort{ITT}.
First, comes the syntax of \acrshort{ETT}:

\[
  \begin{array}{l@{~\,}r@{~\,}l}
    s &\in& \cS \\
    T,A,B,t,u,v &\bnf& x \bnfor \lam{x:A}{B} t \bnfor \app{t}{x:A}{B}{u} \\
    &\bnfor& \pair{x:A}{B}{u}{v} \bnfor \pio{x:A}{B}{p} \bnfor \pit{x:A}{B}{p} \\
    &\bnfor& \refl{A} u \bnfor \J{A}{u}{x.e.P}{w}{v}{p} \\
    % &\bnfor& \funext{x:A}{B}{f}{g}{e} \bnfor \uip{A}{u}{v}{p}{q} \\
    &\bnfor& \ax{n} \\
    &\bnfor& s \bnfor \Prod{x:A} B \bnfor \Sum{x:A} B \bnfor \Eq{A}{u}{v} \\
    \Ga, \D &\bnf& \ctxempty \bnfor \Ga, x:A \\
    \Sigma &\bnf& \ctxempty \bnfor \Sigma, n:A
  \end{array}
\]

\paragraph{Sorts.}

Sorts are kept abstract (as represented by the generic \cS) but are not
unrestricted. With the sorts should come the sort of a sort (or successor
sort) \(\succs{s}\), the sort of a \(\Pi\)-type \(\pisort{s_1}{s_2}\)
where \(s_1\) and \(s_2\) are the sorts of the domain and codomain respecitvely,
and likewise for each constructor.
These are functions, so the underlying \acrshort{PTS} is functional.
\todo{Define fun PTS}
Additionally, we ask that equality of sorts is decidable and that the successor
function is injective:
\[
  \succs{s_1} = \succs{s_2} \longrightarrow s_1 = s_2.
\]
Keeping the sorts abstract means that the proof can be instantiated with a lot
of different hierarchies, as long as they do not feature cumulativity
unfortunately. This will help us apply our result in the homotopy framework.

\paragraph{Annotations}

\paragraph{Isn't \acrshort{ETT} no longer an extension of either \acrshort{ITT}
or \acrshort{WTT}?}

\todo{Maybe separate ITT and WTT as syntactical extensions, then talk
about how ETT is no longer an extension but it doesn't really matter
conservativity can still be stated with a simple translation from ITT/WTT to
ETT.}
\todo{WTT is not included right now}

\section{Typing rules}
\todo{Mention no cumulativity}